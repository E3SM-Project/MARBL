<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What Tracer Tendencies will MARBL Compute? &#8212; MARBL 1.0.0 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="What Forcing Fields has MARBL Requested?" href="forcing_fields.html" />
    <link rel="prev" title="Requirements on the GCM" href="index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="forcing_fields.html" title="What Forcing Fields has MARBL Requested?"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Requirements on the GCM"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">MARBL 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >MARBL user guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >How to Use MARBL in a GCM</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">Requirements on the GCM</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What Tracer Tendencies will MARBL Compute?</a><ul>
<li><a class="reference internal" href="#tracer-metadata-available-from-the-marbl-interface">Tracer Metadata Available from the MARBL Interface</a></li>
<li><a class="reference internal" href="#example-accessing-tracer-metadata-in-pop">Example: Accessing Tracer Metadata in POP</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Requirements on the GCM</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="forcing_fields.html"
                        title="next chapter">What Forcing Fields has MARBL Requested?</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/usr-guide/GCM-interface/GCM_requirements/tracer_state.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="what-tracer-tendencies-will-marbl-compute">
<span id="tracer-state"></span><h1>What Tracer Tendencies will MARBL Compute?<a class="headerlink" href="#what-tracer-tendencies-will-marbl-compute" title="Permalink to this headline">¶</a></h1>
<p>This is an important question, because the GCM will need to provide the current state for each tracer at each timestep (including initial conditions at the beginning of the run).
MARBL provides a stand-alone test in <code class="docutils literal"><span class="pre">$MARBL/tests/regression_tests/requested_tracers</span></code> that shows how the MARBL library passes this information to the GCM.
For example, running</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ ./requested_tracers.py
</pre></div>
</div>
<p>Provides a list of the tracers in the base ecosystem module. The test output is below:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-----------------</span>
<span class="n">Requested</span> <span class="n">tracers</span>
<span class="o">-----------------</span>

<span class="mf">1.</span> <span class="n">PO4</span>
<span class="mf">2.</span> <span class="n">NO3</span>
<span class="mf">3.</span> <span class="n">SiO3</span>
<span class="mf">4.</span> <span class="n">NH4</span>
<span class="mf">5.</span> <span class="n">Fe</span>
<span class="mf">6.</span> <span class="n">Lig</span>
<span class="mf">7.</span> <span class="n">O2</span>
<span class="mf">8.</span> <span class="n">DIC</span>
<span class="mf">9.</span> <span class="n">DIC_ALT_CO2</span>
<span class="mf">10.</span> <span class="n">ALK</span>
<span class="mf">11.</span> <span class="n">ALK_ALT_CO2</span>
<span class="mf">12.</span> <span class="n">DOC</span>
<span class="mf">13.</span> <span class="n">DON</span>
<span class="mf">14.</span> <span class="n">DOP</span>
<span class="mf">15.</span> <span class="n">DOPr</span>
<span class="mf">16.</span> <span class="n">DONr</span>
<span class="mf">17.</span> <span class="n">DOCr</span>
<span class="mf">18.</span> <span class="n">zooC</span>
<span class="mf">19.</span> <span class="n">spChl</span>
<span class="mf">20.</span> <span class="n">spC</span>
<span class="mf">21.</span> <span class="n">spP</span>
<span class="mf">22.</span> <span class="n">spFe</span>
<span class="mf">23.</span> <span class="n">spCaCO3</span>
<span class="mf">24.</span> <span class="n">diatChl</span>
<span class="mf">25.</span> <span class="n">diatC</span>
<span class="mf">26.</span> <span class="n">diatP</span>
<span class="mf">27.</span> <span class="n">diatFe</span>
<span class="mf">28.</span> <span class="n">diatSi</span>
<span class="mf">29.</span> <span class="n">diazChl</span>
<span class="mf">30.</span> <span class="n">diazC</span>
<span class="mf">31.</span> <span class="n">diazP</span>
<span class="mf">32.</span> <span class="n">diazFe</span>
</pre></div>
</div>
<div class="section" id="tracer-metadata-available-from-the-marbl-interface">
<h2>Tracer Metadata Available from the MARBL Interface<a class="headerlink" href="#tracer-metadata-available-from-the-marbl-interface" title="Permalink to this headline">¶</a></h2>
<p>The details are found in <code class="docutils literal"><span class="pre">$MARBL/tests/driver_src/marbl.F90</span></code>:</p>
<div class="highlight-fortran"><div class="highlight"><pre><span></span><span class="k">call </span><span class="n">driver_status_log</span><span class="p">%</span><span class="n">log_header</span><span class="p">(</span><span class="s1">&#39;Requested tracers&#39;</span><span class="p">,</span> <span class="n">subname</span><span class="p">)</span>
<span class="k">do </span><span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">nt</span>
  <span class="k">write</span><span class="p">(</span><span class="n">log_message</span><span class="p">,</span> <span class="s2">&quot;(I0, 2A)&quot;</span><span class="p">)</span> <span class="n">n</span><span class="p">,</span> <span class="s1">&#39;. &#39;</span><span class="p">,</span>                               <span class="p">&amp;</span>
    <span class="nb">trim</span><span class="p">(</span><span class="n">marbl_instance</span><span class="p">%</span><span class="n">tracer_metadata</span><span class="p">(</span><span class="n">n</span><span class="p">)%</span><span class="n">short_name</span><span class="p">)</span>
  <span class="k">call </span><span class="n">driver_status_log</span><span class="p">%</span><span class="n">log_noerror</span><span class="p">(</span><span class="n">log_message</span><span class="p">,</span> <span class="n">subname</span><span class="p">)</span>
<span class="k">end do</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">marbl_interface_class</span></code> contains an object <code class="docutils literal"><span class="pre">tracer_metadata</span></code>, the length of which is equal to the number of tracers MARBL is computing tendencies of.
The <code class="docutils literal"><span class="pre">tracer_metadata_type</span></code> contains metadata for each tracer:</p>
<div class="highlight-fortran"><div class="highlight"><pre><span></span><span class="k">type</span><span class="p">,</span> <span class="k">public</span> <span class="kd">::</span> <span class="n">marbl_tracer_metadata_type</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">short_name</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">long_name</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">units</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">tend_units</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">flux_units</span>
   <span class="kt">logical</span>                 <span class="kd">::</span> <span class="n">lfull_depth_tavg</span>
   <span class="kt">character</span><span class="p">(</span><span class="nb">len</span><span class="o">=</span><span class="n">char_len</span><span class="p">)</span> <span class="kd">::</span> <span class="n">tracer_module_name</span>
<span class="k">end type </span><span class="n">marbl_tracer_metadata_type</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">short_name</span></code> and <code class="docutils literal"><span class="pre">long_name</span></code> are both unique to the tracer, and either can be used to inform the GCM which tracer each index refers to.</p>
</div>
<div class="section" id="example-accessing-tracer-metadata-in-pop">
<h2>Example: Accessing Tracer Metadata in POP<a class="headerlink" href="#example-accessing-tracer-metadata-in-pop" title="Permalink to this headline">¶</a></h2>
<p>Details are on the <a class="reference internal" href="../../../implementations/pop/tracers.html#pop-tracers"><span class="std std-ref">implementation</span></a> page</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="forcing_fields.html" title="What Forcing Fields has MARBL Requested?"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Requirements on the GCM"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">MARBL 1.0.0 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >MARBL user guide</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >How to Use MARBL in a GCM</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" >Requirements on the GCM</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2017, National Science Foundation and U.S. Department of Energy.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>